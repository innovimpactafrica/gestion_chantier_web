<div class="flex flex-col w-[280px] h-[732px] text-gray-900 py-4 px-4 mr-2">
  <!-- Profile Section -->
  <div class="bg-white rounded-[16px] p-4 mb-4 border">
    <div class="flex items-center justify-between">
      <div class="flex items-center">
        <div class="w-10 h-10 rounded-full overflow-hidden mr-3">
          <img [src]="getProfileImageUrl()" [alt]="'Photo de profil de ' + getUserDisplayName()"
            (error)="onImageError($event)" class="w-full h-full object-cover" />
        </div>
        <div>
          <p class="font-bold text-base">{{ getUserDisplayName() }}</p>
          <p class="text-sm">{{ getUserProfile() }}</p>
        </div>
      </div>
      <button class="text-gray-700">
        <!-- <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
        </svg> -->
      </button>
    </div>
  </div>

  <!-- Main Navigation -->
  <nav class="flex-1">
    <ul class="space-y-2">
      <!-- Dashboard - Affiché seulement si pas BET -->
      <li *ngIf="!isBETProfile() && !isSUPPLIERProfile()">
        <a (click)="navigateTo('/dashboard', 'Tableau de bord', 'dashboard')" [class]="'flex items-center justify-between py-3 px-4 rounded-lg cursor-pointer transition-all duration-200 ' + 
                   (isActive('dashboard') ? 'bg-[#FF5C02] text-white' : '')">
          <div class="flex items-center">
            <img src="assets/images/home.png" [class]="'w-[20px] h-[20px] mr-2 transition-all duration-200 ' + 
                         (isActive('dashboard') ? 'brightness-0 invert' : '')" srcset="">
            <span class="text-sm">Tableau de bord</span>
          </div>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd"
              d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
              clip-rule="evenodd" />
          </svg>
        </a>
      </li>

      <!-- Dashboard Etude - Affiché seulement si BET -->
      <li *ngIf="isBETProfile()">
        <a (click)="navigateTo('/dashboard-etude', 'Tableau de bord Etude', 'dashboard-etude')" [class]="'flex items-center justify-between py-3 px-4 rounded-lg cursor-pointer transition-all duration-200 ' + 
                   (isActive('dashboard-etude') ? 'bg-[#FF5C02] text-white' : '')">
          <div class="flex items-center">
            <img src="assets/images/home.png" [class]="'w-[20px] h-[20px] mr-2 transition-all duration-200 ' + 
                         (isActive('dashboard-etude') ? 'brightness-0 invert' : '')" srcset="">
            <span class="text-sm">Tableau de bord Etude</span>
          </div>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd"
              d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
              clip-rule="evenodd" />
          </svg>
        </a>
      </li>

      <!-- Demandes - Affiché seulement si BET -->
      <li *ngIf="isBETProfile()">
        <a (click)="navigateTo('/demande', 'Demandes', 'demande')" [class]="'flex items-center justify-between py-3 px-4 rounded-lg cursor-pointer transition-all duration-200 ' + 
                   (isActive('demande') ? 'bg-[#FF5C02] text-white' : '')">
          <div class="flex items-center">
            <img src="assets/images/home.png" [class]="'w-[20px] h-[20px] mr-2 transition-all duration-200 ' + 
                         (isActive('demande') ? 'brightness-0 invert' : '')" srcset="">
            <span class="text-sm">Demandes</span>
          </div>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd"
              d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
              clip-rule="evenodd" />
          </svg>
        </a>
      </li>

      <!-- Projects Section - Affiché seulement si pas BET -->
      <li *ngIf="!isBETProfile() && !isSUPPLIERProfile()">
        <a (click)="navigateTo('/projects', 'Projets', 'projects')" [class]="'flex items-center justify-between py-3 px-4 rounded-lg cursor-pointer transition-all duration-200 ' + 
                   (isActive('projects') ? 'bg-[#FF5C02] text-white' : '')">
          <div class="flex items-center">
            <i class="fa-regular fa-folder mr-2"></i>
            <span class="text-sm">Projets</span>
          </div>
        </a>
      </li>

      <!-- HR - Affiché seulement si pas BET -->
      <li *ngIf="!isBETProfile() && !isSUPPLIERProfile()">
        <a (click)="navigateTo('/humanresources', 'Ressources humaines', 'hr')" [class]="'flex items-center py-3 px-4 rounded-lg cursor-pointer transition-all duration-200 ' + 
                   (isActive('hr') ? 'bg-[#FF5C02] text-white' : '')">
          <img src="assets/images/humain.png" [class]="'w-[20px] h-[20px] mr-2 transition-all duration-200 ' + 
                       (isActive('hr') ? 'brightness-0 invert' : '')" srcset="">
          <span class="text-sm">Ressources humaines</span>
        </a>
      </li>

      <!-- Sous-traitant - Affiché seulement si pas BET -->
      <li *ngIf="!isBETProfile() && !isSUPPLIERProfile()">
        <a (click)="navigateTo('/subcontractor', 'Sous-traitants', 'subcontractor')" [class]="'flex items-center py-3 px-4 rounded-lg cursor-pointer transition-all duration-200 ' + 
                   (isActive('subcontractor') ? 'bg-[#FF5C02] text-white' : '')">
          <img src="assets/images/humain.png" [class]="'mr-2 transition-all duration-200 ' + 
                       (isActive('subcontractor') ? 'brightness-0 invert' : '')" alt="">
          <span class="text-sm">Sous-traitants</span>
        </a>
      </li>


      <!-- Fournisseurs - Affiché seulement si pas BET -->
      <li *ngIf="!isBETProfile() && !isSUPPLIERProfile()">
        <a (click)="navigateTo('/fournisseur', 'Fournisseurs', 'suppliers')" [class]="'flex items-center py-3 px-4 rounded-lg cursor-pointer transition-all duration-200 ' + 
                   (isActive('suppliers') ? 'bg-[#FF5C02] text-white' : '')">
          <img src="assets/images/humain.png" [class]="'w-[20px] h-[20px] mr-2 transition-all duration-200 ' + 
                       (isActive('suppliers') ? 'brightness-0 invert' : 'group-hover:brightness-0 group-hover:invert')"
            srcset="">
          <span class="text-sm">Fournisseurs</span>
        </a>
      </li>

      <!-- Settings with Dropdown - Affiché seulement si pas BET -->
      <li *ngIf="!isBETProfile() && !isSUPPLIERProfile()">
        <div>
          <!-- Menu principal Paramètres -->
          <a (click)="toggleParametres()"
            [class]="'flex items-center justify-between py-3 px-4 rounded-lg cursor-pointer transition-all duration-200 ' + 
                     (isActive('settings') || isActive('unite-mesure') || isActive('documents') || isActive('typebien') || isActive('categories') ? 'bg-[#FF5C02] text-white' : '')">
            <div class="flex items-center">
              <img src="assets/images/solar_settings.png"
                [class]="'mr-2 transition-all duration-200 ' + 
                           (isActive('settings') || isActive('unite-mesure') || isActive('documents') || isActive('typebien') || isActive('categories') ? 'brightness-0 invert' : '')"
                alt="" srcset="">
              <span class="text-sm">Paramètres</span>
            </div>
            <svg xmlns="http://www.w3.org/2000/svg"
              [class]="'h-4 w-4 transition-transform duration-200 ' + (showParametres ? 'rotate-180' : '')"
              viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd"
                d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                clip-rule="evenodd" />
            </svg>
          </a>

          <!-- Sous-menu Paramètres -->
          <div *ngIf="showParametres" class="mt-2 ml-6 space-y-1 border-l-2 border-gray-200 pl-4">
            <!-- Unité de mesure -->
            <a (click)="navigateToSubSection('/parametres/unite-mesure', 'Unité de mesure', 'unite-mesure')" [class]="'flex items-center py-2 px-3 rounded-md cursor-pointer transition-all duration-200 text-sm ' + 
                       (isActive('unite-mesure') ? 'bg-[#FF5C02] text-white' : '')">
              <img src="assets/images/eclipse.png" alt="" class="mr-2">
              <span>Unité de mesure</span>
            </a>

            <!-- Documents -->
            <a (click)="navigateToSubSection('/parametres/documents', 'Documents', 'documents')" [class]="'flex items-center py-2 px-3 rounded-md cursor-pointer transition-all duration-200 text-sm ' + 
                       (isActive('documents') ? 'bg-[#FF5C02] text-white' : '')">
              <img src="assets/images/eclipse.png" alt="" class="mr-2">
              <span>Documents</span>
            </a>

            <!-- Property Type -->
            <a (click)="navigateToSubSection('/parametres/typebien', 'Type de bien', 'typebien')" [class]="'flex items-center py-2 px-3 rounded-md cursor-pointer transition-all duration-200 text-sm ' + 
                       (isActive('typebien') ? 'bg-[#FF5C02] text-white' : '')">
              <img src="assets/images/eclipse.png" alt="" class="mr-2">
              <span>Type de Bien</span>
            </a>

            <!-- Catégories de matériel -->
            <a (click)="navigateToSubSection('/parametres/categories', 'Catégories de matériel', 'categories')" [class]="'flex items-center py-2 px-3 rounded-md cursor-pointer transition-all duration-200 text-sm ' + 
                       (isActive('categories') ? 'bg-[#FF5C02] text-white' : '')">
              <img src="assets/images/eclipse.png" alt="" class="mr-2">
              <span>Catégories de matériel</span>
            </a>
          </div>
        </div>
      </li>
      <li *ngIf="isSUPPLIERProfile()">
        <a (click)="navigateTo('/dashboardf', 'Tableau de bord', 'dashboardf')" [class]="'flex items-center justify-between py-3 px-4 rounded-lg cursor-pointer transition-all duration-200 ' + 
                   (isActive('dashboardf') ? 'bg-[#FF5C02] text-white' : '')">
          <div class="flex items-center">
            <img src="assets/images/home.png" [class]="'w-[20px] h-[20px] mr-2 transition-all duration-200 ' + 
                         (isActive('dashboardf') ? 'brightness-0 invert' : '')" srcset="">
            <span class="text-sm">Tableau de bord</span>
          </div>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd"
              d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
              clip-rule="evenodd" />
          </svg>
        </a>
      </li>
      <li *ngIf="isSUPPLIERProfile()">
        <a (click)="navigateTo('/commandes', 'Tableau de bord', 'commandes')" [class]="'flex items-center justify-between py-3 px-4 rounded-lg cursor-pointer transition-all duration-200 ' + 
                   (isActive('commandes') ? 'bg-[#FF5C02] text-white' : '')">
          <div class="flex items-center">
            <img src="assets/images/home.png" [class]="'w-[20px] h-[20px] mr-2 transition-all duration-200 ' + 
                         (isActive('commandes') ? 'brightness-0 invert' : '')" srcset="">
            <span class="text-sm">Commandes</span>
          </div>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd"
              d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
              clip-rule="evenodd" />
          </svg>
        </a>
      </li>
        <!-- Fournisseurs - Affiché seulement si pas BET -->
        <li *ngIf="!isBETProfile() && !isSUPPLIERProfile()">
          <a (click)="navigateTo('/mon-compte', 'mon-compte', 'mon-compte')" [class]="'flex items-center py-3 px-4 gap-2 rounded-lg cursor-pointer transition-all duration-200 ' + 
                     (isActive('mon-compte') ? 'bg-[#FF5C02] text-white' : '')">
           <svg class="" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M5.85 17.1C6.7 16.45 7.65 15.9377 8.7 15.563C9.75 15.1883 10.85 15.0007 12 15C13.15 14.9993 14.25 15.187 15.3 15.563C16.35 15.939 17.3 16.4513 18.15 17.1C18.7333 16.4167 19.1877 15.6417 19.513 14.775C19.8383 13.9083 20.0007 12.9833 20 12C20 9.78333 19.221 7.89567 17.663 6.337C16.105 4.77833 14.2173 3.99933 12 4C9.78267 4.00067 7.895 4.78 6.337 6.338C4.779 7.896 4 9.78333 4 12C4 12.9833 4.16267 13.9083 4.488 14.775C4.81333 15.6417 5.26733 16.4167 5.85 17.1ZM12 13C11.0167 13 10.1873 12.6627 9.512 11.988C8.83667 11.3133 8.49933 10.484 8.5 9.5C8.50067 8.516 8.83833 7.68667 9.513 7.012C10.1877 6.33733 11.0167 6 12 6C12.9833 6 13.8127 6.33767 14.488 7.013C15.1633 7.68833 15.5007 8.51733 15.5 9.5C15.4993 10.4827 15.162 11.312 14.488 11.988C13.814 12.664 12.9847 13.0013 12 13ZM12 22C10.6167 22 9.31667 21.7373 8.1 21.212C6.88334 20.6867 5.825 19.9743 4.925 19.075C4.025 18.1757 3.31267 17.1173 2.788 15.9C2.26333 14.6827 2.00067 13.3827 2 12C1.99933 10.6173 2.262 9.31733 2.788 8.1C3.314 6.88267 4.02633 5.82433 4.925 4.925C5.82367 4.02567 6.882 3.31333 8.1 2.788C9.318 2.26267 10.618 2 12 2C13.382 2 14.682 2.26267 15.9 2.788C17.118 3.31333 18.1763 4.02567 19.075 4.925C19.9737 5.82433 20.6863 6.88267 21.213 8.1C21.7397 9.31733 22.002 10.6173 22 12C21.998 13.3827 21.7353 14.6827 21.212 15.9C20.6887 17.1173 19.9763 18.1757 19.075 19.075C18.1737 19.9743 17.1153 20.687 15.9 21.213C14.6847 21.739 13.3847 22.0013 12 22ZM12 20C12.8833 20 13.7167 19.871 14.5 19.613C15.2833 19.355 16 18.984 16.65 18.5C16 18.0167 15.2833 17.646 14.5 17.388C13.7167 17.13 12.8833 17.0007 12 17C11.1167 16.9993 10.2833 17.1287 9.5 17.388C8.71667 17.6473 8 18.018 7.35 18.5C8 18.9833 8.71667 19.3543 9.5 19.613C10.2833 19.8717 11.1167 20.0007 12 20ZM12 11C12.4333 11 12.7917 10.8583 13.075 10.575C13.3583 10.2917 13.5 9.93333 13.5 9.5C13.5 9.06667 13.3583 8.70833 13.075 8.425C12.7917 8.14167 12.4333 8 12 8C11.5667 8 11.2083 8.14167 10.925 8.425C10.6417 8.70833 10.5 9.06667 10.5 9.5C10.5 9.93333 10.6417 10.2917 10.925 10.575C11.2083 10.8583 11.5667 11 12 11Z" fill="#2C3E50"/>
            </svg>
            
            <span class="text-sm">Mon Compte </span>
          </a>
        </li>
      <!-- Logout Section - Toujours affiché -->
      <div class="mt-4">
        <a (click)="logout()" class="flex items-center py-3 px-4 rounded-lg transition-all duration-200 cursor-pointer">
          <img src="assets/images/logout.png" class="mr-2 transition-all duration-200" alt="">
          <span class="text-sm">Se déconnecter</span>
        </a>
      </div>
    </ul>
  </nav>

  <!-- Company Logo -->

</div>